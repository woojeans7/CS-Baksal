# 도메인-엔티티-비즈니스 로직 개념

## 도메인(Domain)

예로 들어, 온라인 서점은 온라인으로 책을 판매하는 데 필요한 상품 조회, 구매, 결제, 배송 추적 등의 기능을 제공한다. 개발자 입장에서 온라인 서점은 구현해야 할 소프트웨어의 대상이 된다. 
이처럼 **소프트웨어로 해결하고자 하는 문제 영역**을 **도메인(domain)** 이라고 한다. 

### 하위 도메인(Subdomain)
하나의 도메인은 여러 **하위 도메인(subdomain)** 으로 나눌 수 있다. 

## 엔티티(Entity)
도메인 내에서 **고유 식별자를 가지고 있는 구별 가능한 객체**이다. 
주문 도메인 내에서 각 주문은 주문번호를 가지고 있는데 이 주문번호는 각 주문마다 서로 다르다. 이 주문번호가 주문 엔티티의 식별자가 된다. (주문 도메인 모델에서 주문에 해당하는 클래스 `Order`가 엔티티가 되면 주문번호를 속성(attribute)으로 갖게 됨.)
```java
class Order{
	Long orderNo; // 주문번호
	.
	.
}
```

## 비즈니스 로직(Business Logic)
### 비즈니스(Business)
비즈니스(business)는 회사가 수익을 창출하기 위해 수행하는 활동과 그 과정의 규칙 및 목적을 말한다. 

### 비즈니스 로직과 도메인 로직
비즈니스 로직(business logic)는 **도메인(domain)에서 발생하는 문제를 해결하기 위한 규칙이나 절차를 구현한 것**을 의미한다.
일반적으로 비즈니스 로직는 도메인 로직과 같은 의미로 쓰인다. 그래서 도메인 로직과 비즈니스 로직을 잘 구분하지 않는다.

굳이 범위로 세분화하여 나누자면, 
- 비즈니스 로직은 어떤 서비스를 개발할 때 목적 즉, 비즈니스를 이루기 위해 작성한 로직을 말한다.
- 도메인 로직은 특정 도메인에만 속한 로직들을 말한다. (도메인 로직 <= 비즈니스 로직)
- 예시) 온라인 서점에서 책을 검색하고, 장바구니에 담고, 결제를 하여 주문이 완료된 후 배송하는 것은 비즈니스 로직에 해당하고, 이 책을 검색하는 행위, 장바구니에 담는 행위처럼 특정 도메인을 해결하기 위한 로직을 도메인 로직이라고 이해할 수 있다.
**하지만 이렇게 구분하지 않기 때문에 사실상 둘이 거의 같은 개념으로 이해하면 된다.**

## 애플리케이션 서비스 로직(Application Service Logic)
애플리케이션 서비스 로직(application service logic)은 도메인 로직이 의사결정할 수 있도록 입력을 제공하고, 결과를 외부(UI/DB/외부 시스템)에 전달하는 로직이다.
### 비즈니스 로직 vs. 서비스 로직
**비즈니스 로직과 서비스 로직의 차이점**이라고 한다면 '결정'을 할 수 있는가를 예시로 생각하면 좋다. "결제 도메인"을 생각해보자. 책을 사기 위해 10000원을 결제했다고 한다면, 책을 구입하고, 잔액이 차감되는 행위는 비즈니스 로직이다. 남은 잔액을 데이터베이스에 업데이트 하는 것은 서비스 로직이라고 볼 수 있다. 
- **도메인 로직**: 비즈니스 의사결정을 하는 로직 - 예: 잔액 충분한가? 수수료는 얼마인가? 
- **애플리케이션 서비스 로직**: 기술적 처리 (UI/DB/외부 시스템) - 예: DB 저장, 외부 API 호출, 에러 메시지 표시(UI)